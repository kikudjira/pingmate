<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Settings</title>
  <link rel="stylesheet" href="../../css/styles.css">
</head>
<body>
  <!-- Tab navigation -->
  <div class="tab">
    <button class="tablinks active" aria-controls="SettingsTab" aria-selected="true">Settings</button>
    <button class="tablinks" aria-controls="AboutTab" aria-selected="false">About</button>
  </div>

  <!-- Settings Tab Content -->
  <div id="SettingsTab" class="tabcontent" style="display: block;">
    <form id="settings-form">
      <div class="form-content">
        <!-- IP Address Input -->
        <div class="field">
          <label for="pingTarget1">Target IP:</label>
          <div class="ip-input">
            <input type="number" id="pingTarget1" name="pingTarget1" min="0" max="255" required>
            <span>.</span>
            <input type="number" id="pingTarget2" name="pingTarget2" min="0" max="255" required>
            <span>.</span>
            <input type="number" id="pingTarget3" name="pingTarget3" min="0" max="255" required>
            <span>.</span>
            <input type="number" id="pingTarget4" name="pingTarget4" min="0" max="255" required>
          </div>
        </div>
        <div class="field">
          <label for="pingInterval">Interval (ms):</label>
          <input type="number" id="pingInterval" name="pingInterval" required>
        </div>

        <!-- Ping Thresholds -->
        <div class="field">
          <label for="goodPingThreshold">Good Ping (ms):</label>
          <input type="number" id="goodPingThreshold" name="goodPingThreshold" required>
        </div>
        <div class="field">
          <label for="unstablePingThreshold">Unstable Ping (ms):</label>
          <input type="number" id="unstablePingThreshold" name="unstablePingThreshold" required>
        </div>

        <!-- Color Settings -->
        <div class="field">
          <label for="goodColor">Good Color:</label>
          <input type="color" id="goodColor" name="goodColor">
        </div>
        <div class="field">
          <label for="unstableColor">Unstable Color:</label>
          <input type="color" id="unstableColor" name="unstableColor">
        </div>
        <div class="field">
          <label for="problemColor">Problem Color:</label>
          <input type="color" id="problemColor" name="problemColor">
        </div>
      </div>
      <div class="form-footer">
        <p id="status-message"></p>
        <div class="button-row">
          <button type="submit" id="save-button" disabled>Save</button>
          <button type="button" id="reset-button">Reset to Default</button>
        </div>
      </div>
    </form>
  </div>

  <!-- About Tab Content -->
  <div id="AboutTab" class="tabcontent" style="display: none;">
    <p>
      This is a simple program that places an icon in the system tray and changes the icon's state depending on the quality of your internet connection in real-time.
      <br><br>In the settings window, you can modify several options or reset them to default.
      <br><br>The icon will look like this <img src="file:///Applications/Ping%20Mate.app/Contents/Resources/assets/green.png" alt="good" class="icon-preview"> if the internet connection is good, like this 
      <img src="file:///Applications/Ping%20Mate.app/Contents/Resources/assets/yellow.png" alt="unstable" class="icon-preview"> if there are issues, and like this 
      <img src="file:///Applications/Ping%20Mate.app/Contents/Resources/assets/red.png" alt="problem" class="icon-preview"> if the connection is very unstable or completely absent. These icons 
      <img src="file:///Applications/Ping%20Mate.app/Contents/Resources/assets/green-yellow.png" alt="was unstable" class="icon-preview"> <img src="file:///Applications/Ping%20Mate.app/Contents/Resources/assets/green-red.png" alt="was problem" class="icon-preview"> indicate that your internet connection is currently good but had problems recently (within the last five seconds).
      <br><br>TIP! I haven't implemented the auto-start function yet. Therefore, I recommend setting it up manually:
      <br>1. Open System Settings, type "Login" in the search bar at the top, and select "Login Items & Extensions."
      <br>2. In the top section "Open at Login," click the "+" and select the Ping Mate application from the list.
    </p>
  </div>

  <script>
    document.querySelectorAll('.tablinks').forEach(button => {
      button.addEventListener('click', () => {
        // Hide all tab contents
        document.querySelectorAll('.tabcontent').forEach(tab => {
          tab.style.display = 'none';
        });

        // Show selected tab
        const targetTab = document.querySelector(`#${button.getAttribute('aria-controls')}`);
        targetTab.style.display = 'block';

        // Update tab buttons' active state and accessibility attributes
        document.querySelectorAll('.tablinks').forEach(btn => {
          btn.classList.remove('active');
          btn.setAttribute('aria-selected', 'false');
        });

        button.classList.add('active');
        button.setAttribute('aria-selected', 'true');
      });
    });

    // Open the Settings tab by default
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelector('.tablinks.active').click();
    });
  </script>
  <script src="settings.js"></script>
</body>
</html>
